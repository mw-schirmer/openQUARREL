% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/functions_and_settings.R
\name{calibrate_model}
\alias{calibrate_model}
\title{Calibrate a Hydrological Model}
\usage{
calibrate_model(
  hydro_data,
  split_indices,
  model,
  input,
  snow_module = NULL,
  snow_input = NULL,
  snow_parameters = NULL,
  error_crit_transfo = "KGE__none",
  cal_maximize = TRUE,
  cal_fn = "DEoptim",
  do_transfo_param = FALSE,
  cal_par = default_cal_par
)
}
\arguments{
\item{hydro_data}{A list or data frame containing observed runoff and meteorological data,
typically loaded using \code{\link{load_meteo_data}}.}

\item{split_indices}{A list of index vectors (e.g., from \code{\link{split_data_set}})
indicating warm-up and calibration periods.}

\item{model}{A string specifying the hydrological model to calibrate.
For a complete list see table in \code{vignette("model_overview")}.}

\item{input}{A list of model input data, typically created using \code{\link{create_input}}.}

\item{snow_module}{Optional. A string specifying the snow module (currently \code{"CemaNeige"} and \code{"TUWsnow"}).}

\item{snow_input}{Optional. Input data for the snow module.}

\item{snow_parameters}{Optional. A vector of fixed snow parameters. If \code{NULL},
snow parameters are assumed to be part of the calibration.}

\item{error_crit_transfo}{A string combining the error criterion and runoff transformation,
separated by \code{"__"} (e.g., \code{"KGE__none"}). Optionally, a third value (e.g., lambda)
can be included for transformations like Box-Cox.}

\item{cal_maximize}{Logical. If \code{TRUE}, the calibration maximizes the objective function.}

\item{cal_fn}{A string specifying the calibration function. Supported options include
\code{"Calibration_Michel"} (for \pkg{airGR} models), \code{"DEoptim"}, \code{"hydroPSO"},
\code{"malschains"}, and other supported optimizers.
For a complete list see table in \code{vignette("calibration_methods_overview")}.}

\item{do_transfo_param}{Logical. If \code{TRUE}, parameters are transformed to a unit hypercube
before calibration.}

\item{cal_par}{A list of calibration settings specific to the chosen calibration function.
Defaults to \code{default_cal_par}, but can be customized by the user.}
}
\value{
A list containing:
\itemize{
\item \code{model_param}: Calibrated model parameters.
\item \code{error_crit_transfo}: The error criterion and transformation used.
\item \code{error_crit_val}: The final value of the error criterion.
\item \code{cal_fn}: The calibration function used.
\item \code{do_transfo_param}: Whether parameter transformation was applied.
\item \code{duration}: Duration of the calibration process.
\item \code{cal_par}: Calibration settings used.
\item \code{more_info}: Additional model- or method-specific output.
}
}
\description{
Performs calibration of a hydrological model using a specified optimization algorithm.
Supports models from the \pkg{airGR}, \pkg{TUWmodel}, \pkg{hydromad}, and \pkg{topmodel}
packages, with optional snow module integration. The function supports both native
calibration routines (e.g., \code{Calibration_Michel} for \pkg{airGR}) and general-purpose
optimizers (e.g., \code{DEoptim}, \code{hydroPSO}, \code{malschains}).
}
\note{
\itemize{
\item \code{Calibration_Michel} is only available for \pkg{airGR} models.
\item If \code{Calibration_Michel} is used, parameters are assumed to be transformed.
\item The function supports power and Box-Cox runoff transformations, with lambda optionally specified.
\item Future improvements may simplify access to \code{cal_par} for end users.
}
}
\examples{
\dontrun{
calibration_results <- calibrate_model(
  hydro_data = hydro_data,
  split_indices = split_data_set(...),
  model = "GR4J",
  input = create_input(...),
  error_crit_transfo = "KGE__none",
  cal_maximize = TRUE,
  cal_fn = "DEoptim",
  do_transfo_param = TRUE,
  cal_par = default_cal_par
)
}
}
\seealso{
\code{\link{call_cal_fn}}, \code{\link{optim_fn}}, \code{\link{create_input}},
\code{\link{load_meteo_data}}, \code{\link{split_data_set}}, \code{\link{transfo_q}}
}
